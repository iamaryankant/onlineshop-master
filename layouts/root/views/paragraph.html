<div class="paragraph" style="position:relative;">
  <div data-id="butedit" class="bttopleftinside"></div>
  <div data-id="butedit" class="bttopleft"></div>
  <div data-id="admnbuts" class="bttopleftinsideafteredit">
    <div class="admnbtsgrid"></div>
  </div>
  <div data-id='paragraph'></div>
  <script>
    thisNode.getRelationship("pageelementsdata").getChild().writeProp(thisElement);
    if (webuser.isWebAdmin()) {
      const {visibleOnMouseOver}=await import('./' + CLIENT_MODULES_PATH + 'frontutils.js');
      visibleOnMouseOver(thisElement.parentElement.querySelector('.bttopleftinside[data-id=butedit]'), thisElement.parentElement);
      thisNode.getRelationship("pageelementsdata").getChild().appendView(thisElement.parentElement.querySelector('.bttopleftinside[data-id=butedit]'), "butedit", {editElement: thisElement, thisAttribute: 'innerHTML', inlineEdition: false});
      visibleOnMouseOver(thisElement.parentElement.querySelector('[data-id=admnbuts]'), thisElement.parentElement);
      thisNode.appendView(thisElement.parentElement.querySelector('.admnbtsgrid'), "butchpos", {position: 'vertical'});
      thisNode.appendView(thisElement.parentElement.querySelector('.admnbtsgrid'), "butdelete");
      thisNode.appendView(thisElement.parentElement.querySelector('.admnbtsgrid'), "butaddnewnode");
      visibleOnMouseOver(thisElement.parentElement.querySelector('.bttopleft[data-id=butedit]'), thisElement.parentElement);
      thisElement.onblur=function(){
        thisElement.parentElement.querySelector('textarea').value=thisElement.innerHTML;
      }
    }
  </script>  
  <textarea style="display:none; width:100%" rows="6" disabled></textarea>
  <script>
    const myNode=thisNode.getRelationship("pageelementsdata").getChild();
    myNode.writeProp(thisElement);
    thisElement.onblur=function(){
      thisElement.parentElement.querySelector('div[data-id=paragraph]').innerHTML=thisElement.value;
      thisElement.style.display="none";
    }
    //adding the edition pencil
    if (webuser.isWebAdmin()) {
      myNode.appendView(thisElement.parentElement.querySelector('.bttopleft[data-id=butedit]'), "butedit", {editElement: thisElement, image: 'code', inlineEdition: false})
      .then(()=>{
        thisElement.parentElement.querySelector('.bttopleft[data-id=butedit]').querySelector('button[data-id=codebut]').addEventListener('click', ()=>{
          thisElement.style.display="unset";
          thisElement.focus();
        });
      });
    }
  </script>
</div>